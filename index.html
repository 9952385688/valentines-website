<!DOCTYPE html>
<html>
<head>
<title>Our Forever Story ‚ù§Ô∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
body {
    margin:0;
    padding:0;
    overflow:hidden;
    background:black;
    font-family:'Playfair Display', serif;
    color:white;
}

/* STAR SKY */
.stars {
    position:fixed;
    width:100%;
    height:100%;
    background:black;
    overflow:hidden;
    z-index:-1;
}

.star {
    position:absolute;
    width:2px;
    height:2px;
    background:white;
    animation: twinkle 2s infinite alternate;
}

@keyframes twinkle {
    from { opacity:0.2; }
    to { opacity:1; }
}

@keyframes pulse {
    0% { transform: scale(1); opacity: 0.3; }
    50% { transform: scale(1.5); opacity: 1; }
    100% { transform: scale(1); opacity: 0.3; }
}

/* PASSWORD SCREEN */
#passwordScreen {
    position:absolute;
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    background:black;
}

input {
    padding:10px;
    font-size:18px;
    border-radius:10px;
    border:none;
    text-align:center;
}

button {
    margin-top:20px;
    padding:12px 30px;
    font-size:18px;
    border:2px solid white;
    background:transparent;
    color:white;
    cursor:pointer;
    transition:0.3s;
}

button:hover {
    background:white;
    color:black;
}

/* SCENES */
.scene {
    position:absolute;
    width:100%;
    height:100%;
    background-size:cover;
    background-position:center;
    opacity:0;
    transition:opacity 2s, transform 2s;
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    padding:20px;
}

.active { 
    opacity:1; 
    transform: scale(1.02);
}

.overlay {
    background:rgba(0,0,0,0.6);
    padding:30px;
    border-radius:15px;
}

h1 { font-size:45px; }
p { font-size:22px; }

/* RING */
#ring {
    font-size:80px;
    display:none;
    animation: zoomRing 2s forwards;
}

@keyframes zoomRing {
    from { transform:scale(0); opacity:0; }
    to { transform:scale(1.5); opacity:1; }
}

/* Fireworks */
.firework {
    position:absolute;
    font-size:20px;
    animation: explode 2.5s ease-out forwards;
}

@keyframes explode {
    0% { transform:scale(0); opacity:1; }
    100% { transform:scale(4); opacity:0; }
}
</style>
</head>

<body>

<div class="stars" id="stars"></div>

<div id="passwordScreen">
    <h1>Enter Our Secret Code ‚ù§Ô∏è</h1>
    <input type="password" id="passwordInput" placeholder="Enter code">
    <button onclick="unlock()">Unlock Our Story</button>
</div>

<div class="scene" id="scene1" style="background-image:url('photo1.jpg')">
    <div class="overlay">
        <h1>It All Started...</h1>
        <p>August 8, 2018 ‚ù§Ô∏è</p>
    </div>
</div>

<div class="scene" id="scene2" style="background-image:url('photo2.jpg')">
    <div class="overlay">
        <h1>Our Journey</h1>
        <p id="timeTogether"></p>
    </div>
</div>

<div class="scene" id="scene3" style="background-image:url('photo3.jpg')">
    <div class="overlay">
        <h1>Will You Stay With Me Forever?</h1>
        <div id="ring">üíç</div>
    </div>
</div>

<audio id="bgMusic">
    <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
// Scene management
let scenes = document.querySelectorAll(".scene");
let index = 0;

// STAR GENERATOR
function createStars(){
    const star=document.createElement("div");
    star.classList.add("star");
    star.style.left=Math.random()*100+"vw";
    star.style.top=Math.random()*100+"vh";
    document.getElementById("stars").appendChild(star);
}
for(let i=0;i<200;i++){ createStars(); }

// PRESS ENTER TO UNLOCK
document.getElementById("passwordInput").addEventListener("keypress", function(e){
    if(e.key === "Enter") unlock();
});

// UNLOCK FUNCTION
function unlock() {
    const input = document.getElementById("passwordInput").value.trim();
    if(input === "1922") {
        document.getElementById("passwordScreen").style.display = "none";
        scenes[0].classList.add("active");

        let music = document.getElementById("bgMusic");
        music.play().catch(()=>{});

        startScenes();

        // Start mini fireworks immediately
        repeatFireworks();
    } else {
        alert("Wrong Secret Code ‚ù§Ô∏è");
    }
}

// AUTOMATIC SCENE CHANGE
function startScenes() {
    const audio = document.getElementById("bgMusic");

    const interval = setInterval(() => {
        scenes[index].classList.remove("active");
        index++;
        if(index < scenes.length){
            scenes[index].classList.add("active");

            if(scenes[index].id === "scene3"){
                showRingAndFireworks();
                twinkleScene3Stars();

                // Fade-in music for cinematic effect
                fadeInMusic(audio, 4000); // 4s fade-in
            } else {
                resetStars();
            }

        } else {
            // Fade-out music after story ends
            fadeOutMusic(audio, 4000);
            clearInterval(interval);
        }
    }, 8000);
}

// TIME TOGETHER COUNTER
let startDate = new Date("August 8, 2018 00:00:00").getTime();
setInterval(()=>{
    let now = new Date().getTime();
    let days = Math.floor((now-startDate)/(1000*60*60*24));
    let years = Math.floor(days/365);
    document.getElementById("timeTogether").innerHTML =
    years + " Years and " + days + " Days Together ‚ù§Ô∏è";
},1000);

// FIREWORKS FUNCTIONS
function startFireworks(){
    for(let i=0;i<40;i++){
        const fire=document.createElement("div");
        fire.classList.add("firework");
        fire.innerHTML="üéÜ";
        fire.style.left=Math.random()*100+"vw";
        fire.style.top=Math.random()*100+"vh";
        document.body.appendChild(fire);
        setTimeout(()=>{fire.remove();},2500);
    }
}

function repeatFireworks(){
    startFireworks();
    let fireInterval = setInterval(startFireworks,2000);
    setTimeout(()=>clearInterval(fireInterval),20000); // lasts 20s
}

// SHOW RING AND CINEMATIC FIREWORKS IN SCENE 3
function showRingAndFireworks() {
    const ring = document.getElementById("ring");
    ring.style.display = "block";

    const colors = ["üíñ","‚ú®","üíõ","üíú","üíô"];

    function createFirework() {
        const fire = document.createElement("div");
        fire.classList.add("firework");
        fire.innerHTML = colors[Math.floor(Math.random()*colors.length)];
        fire.style.left = Math.random()*100 + "vw";
        fire.style.top = Math.random()*100 + "vh";
        fire.style.fontSize = 15 + Math.random()*25 + "px";
        document.body.appendChild(fire);
        setTimeout(()=>{fire.remove();},2500);
    }

    for(let i=0;i<50;i++){
        setTimeout(createFirework, i*100);
    }
}

// STARS PULSING FOR SCENE 3
function twinkleScene3Stars(){
    const stars = document.querySelectorAll(".star");
    stars.forEach(star=>{
        star.style.animation="pulse 1s infinite alternate";
    });
}

// RESET STARS TO NORMAL TWINKLE
function resetStars(){
    const stars = document.querySelectorAll(".star");
    stars.forEach(star=>{
        star.style.animation="twinkle 2s infinite alternate";
    });
}

// MUSIC FADE FUNCTIONS
function fadeInMusic(audio, duration = 3000) {
    audio.volume = 0;
    audio.play().catch(()=>{});
    let step = 0.05;
    let interval = duration / (1/step);
    let fade = setInterval(()=>{
        if(audio.volume < 1){
            audio.volume = Math.min(audio.volume + step, 1);
        } else {
            clearInterval(fade);
        }
    }, interval);
}

function fadeOutMusic(audio, duration = 3000) {
    let step = 0.05;
    let interval = duration / (1/step);
    let fade = setInterval(()=>{
        if(audio.volume > 0){
            audio.volume = Math.max(audio.volume - step, 0);
        } else {
            audio.pause();
            clearInterval(fade);
        }
    }, interval);
}
</script>

</body>
</html>
